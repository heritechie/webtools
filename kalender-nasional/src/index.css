@tailwind base;
@tailwind components;
@tailwind utilities;

/* ====== BASE (minimal, flat) ====== */
@layer base {
  :root {
    color-scheme: dark light;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, sans-serif;

    --bg: #0b0b0c;
    --panel: #111214;
    --panel-soft: #141518;
    --panel-alt: #17181c;

    --text: #e9e9ea;
    --text-weak: #b7b7bb;
    --text-mute: #8e8e93;

    --line: #232428;
    --line-soft: #1d1e22;

    --accent: #cfd0d3;
    --blue: #93b0ff;
    --amber: #f4c766;
    --red: #ef4444;
  }

  :root[data-theme="light"] {
    --bg: #fafafa;
    --panel: #ffffff;
    --panel-soft: #fbfbfc;
    --panel-alt: #f6f7f8;

    --text: #1b1b1d;
    --text-weak: #5b5d61;
    --text-mute: #7b7e83;

    --line: #e6e6ea;
    --line-soft: #ececf0;

    --accent: #2c2d31;
    --blue: #3b61ff;
    --amber: #b7791f;
    --red: #b91c1c;
  }

  html, body { margin: 0; min-height: 100%; }
  body { background: var(--bg); color: var(--text); line-height: 1.6; text-rendering: optimizeLegibility; -webkit-font-smoothing: antialiased; }

  a { color: inherit; text-decoration: none; }
  a:focus-visible { outline: 2px solid var(--accent); outline-offset: 3px; }

  .sr-only {
    position: absolute !important; width: 1px; height: 1px; padding: 0; margin: -1px;
    overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0;
  }
}

/* ====== LAYOUT ====== */
@layer components {
  .app-shell { min-height: 100vh; display: flex; flex-direction: column; }
  .site-header { display: flex; align-items: center; gap: 12px; width: min(1024px, 100% - 32px); margin: 0 auto; padding: 18px 0; }
  .site-logo-link { display: inline-flex; align-items: center; }
  .site-logo { height: 28px; width: auto; }
  .site-title { font-size: 0.95rem; font-weight: 600; letter-spacing: .08em; text-transform: uppercase; color: var(--text-weak); margin-left: 4px; }
  .site-subtitle { font-size: 0.85rem; font-weight: 400; letter-spacing: .08em;  color: var(--text-weak); margin-left: 4px; }
  .site-header-spacer { flex: 1; }

  .app-main { flex: 1 1 auto; padding: 18px 0 40px; }
  .app-container { width: min(1024px, 100% - 32px); margin: 0 auto; display: flex; flex-direction: column; gap: 24px; }

  .calendar-shell { display: grid; gap: 16px; background: var(--panel); border-radius: 12px; padding: 16px; }

  .calendar-header { display: grid; gap: 12px; }
  @media (min-width: 768px) { .calendar-header { grid-template-columns: 1fr auto; align-items: end; } }

  .calendar-title p { margin: 0; font-size: 0.72rem; letter-spacing: .12em; text-transform: uppercase; color: var(--text-mute); }
  .calendar-title h1 { margin: 2px 0 0; font-size: 1.3rem; font-weight: 600; }

  .calendar-controls { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; justify-content: flex-end; }
  @media (max-width: 768px) { .calendar-controls { justify-content: flex-start; } }

  .calendar-nav { display: inline-flex; gap: 6px; }
  .btn-nav { border: 1px solid var(--line); background: var(--panel-soft); color: var(--text); padding: 6px 10px; font-size: 0.82rem; font-weight: 600; border-radius: 8px; }
  .btn-nav:hover { background: var(--panel-alt); }

  .calendar-select { display: grid; gap: 4px; font-size: 0.72rem; text-transform: uppercase; letter-spacing: .08em; color: var(--text-mute); }
  .calendar-select span { font-weight: 600; }
  .calendar-select select { border-radius: 8px; border: 1px solid var(--line); background: var(--panel-soft); color: var(--text); padding: 6px 10px; font-size: 0.9rem; font-weight: 600; outline: none; }
  .calendar-select select:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

  .holiday-count { border-radius: 999px; border: 1px solid var(--line); background: var(--panel-soft); color: var(--text-weak); padding: 6px 10px; font-size: 0.78rem; font-weight: 600; }

  .calendar-layout { display: grid; gap: 16px; }
  @media (min-width: 1024px) { .calendar-layout { grid-template-columns: minmax(0,1fr) 280px; } }

  .calendar-table-wrapper { overflow: hidden; border-radius: 10px; border: 1px solid var(--line); background: var(--panel-soft); }

  /* === FIX GRID: pakai table-layout: fixed agar 7 kolom seragam === */
  .calendar-table { width: 100%; border-collapse: collapse; table-layout: fixed; }
  .calendar-table thead tr { background: var(--panel-alt); text-transform: uppercase; letter-spacing: .1em; font-size: 0.7rem; color: var(--text-mute); }
  .calendar-table th, .calendar-table td { padding: 10px; text-align: center; border-bottom: 1px solid var(--line-soft); }
  .calendar-table thead th { border-bottom: 1px solid var(--line); }

  /* <td> bukan flex â€” isi dibungkus __inner */
  .calendar-cell { padding: 0; vertical-align: top; background: transparent; }
  .calendar-cell__inner {
    min-height: 72px;
    display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px;
    margin: 6px; border-radius: 8px;
  }

  .calendar-cell--muted .calendar-cell__inner { color: var(--text-mute); }
  .calendar-cell--current .calendar-cell__inner { background: transparent; }
  .calendar-cell--holiday .calendar-cell__inner { outline: 1px solid var(--line); background: var(--panel); }
  .calendar-cell--weekend .calendar-cell__inner { color: var(--text-weak); }
  .calendar-cell--today .calendar-cell__inner { outline: 2px solid var(--amber); outline-offset: -2px; }

  .calendar-cell__day { font-size: 0.98rem; font-weight: 600; }
  .calendar-cell__holiday { font-size: 0.7rem; line-height: 1.35; color: var(--blue); padding: 0 6px; }

  /* ====== PANEL HARI LIBUR ====== */
  .holiday-panel {  gap: 12px; padding: 12px; border-radius: 10px; border: 1px solid var(--line); background: var(--panel-soft); }
  .holiday-panel h2 { margin: 0 0 18px; font-size: 0.78rem; letter-spacing: .12em; text-transform: uppercase; color: var(--text-mute); }
  .holiday-panel__empty { margin: 0; font-size: 0.82rem; color: var(--text-mute); }

  .holiday-panel__list {
	list-style: none;
	margin: 0;
	padding: 0;
	display: flex;
	flex-direction: column;
	gap: 12px;
  }
  .holiday-panel__list li {
	display: flex;
	align-items: flex-start;
	gap: 12px;
	padding: 12px;
	border-radius: 10px;
	border: 1px solid var(--line);
	background: var(--panel);
  }

  /* kartu list libur: dua kolom (tanggal | isi) */
  .holiday-item { display: contents; }
  .holiday-item__date {
	display: grid;
	place-items: center;
	width: 56px;
	height: 56px;
	border: 1px solid var(--line);
	border-radius: 10px;
	background: var(--panel-soft);
	flex: 0 0 56px;
  }
  
  .holiday-item__day {
	font-size: 1rem;
	font-weight: 800;
	line-height: 1;
	color: var(--red);
  }
  .holiday-item__mon {
	font-size: 0.7rem;
	text-transform: uppercase;
	letter-spacing: .08em;
	color: var(--text-weak);
  }

  .holiday-item__content {
	display: grid;
	gap: 6px;
	min-width: 0; /* biar wrap rapi */
  }
  
  .holiday-item__header {
	display: flex;
	align-items: center;
	gap: 10px;
	flex-wrap: wrap;            /* badge pindah baris kalau sempit */
  }
  
  .holiday-item__datefull {
	font-size: 0.82rem;
	color: var(--text-weak);
	flex: 0 0 auto;
  }
  
  .holiday-item__title {
	margin: 0;
	font-size: 0.98rem;
	font-weight: 700;
	color: var(--text);
  }
  
  .holiday-item__desc {
	margin: 0;
	font-size: 0.8rem;
	color: var(--text-mute);
  }

  /* badge ringkas (tanpa duplikasi) */
  .holiday-panel__badge {
	display: inline-flex;
	align-items: center;
	padding: 4px 8px;
	border-radius: 999px;
	font-size: 0.68rem;
	font-weight: 800;
	letter-spacing: .08em;
	text-transform: uppercase;
	border: 1px solid var(--line);
	white-space: nowrap;
  }
  .holiday-panel__badge--collective { background: transparent; color: var(--amber); }
  .holiday-panel__badge--national  { background: transparent; color: var(--blue); }

  .site-footer { width: min(1024px, 100% - 32px); margin: 0 auto 28px; padding: 10px 0; color: var(--text-mute); font-size: 0.8rem; text-align: center; border-top: 1px solid var(--line); }
}

@layer utilities {
  .text-weak { color: var(--text-weak); }
  .text-mute { color: var(--text-mute); }
}

/* ====== OVERRIDES & RESPONSIVE ====== */

/* Tanggal & label libur di grid benar-benar merah */
.calendar-cell--holiday .calendar-cell__day,
.calendar-cell--holiday .calendar-cell__holiday { color: var(--red); }

/* Responsive tweak: rapatkan di layar kecil */
@media (max-width: 640px) {
  .calendar-table th, .calendar-table td { padding: 6px; }
  .calendar-cell__inner { min-height: 56px; margin: 4px; }
}

/* Responsive: header item libur menumpuk di layar sangat kecil */
@media (max-width: 420px) {
	.holiday-panel__list li { gap: 10px; padding: 10px; }
	.holiday-item__date { width: 48px; height: 48px; flex-basis: 48px; }
	.holiday-item__day { font-size: .95rem; }
	.holiday-item__header { flex-direction: column; align-items: flex-start; gap: 6px; }
  }
